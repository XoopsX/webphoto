<{* $Id: webphoto_main_index.html,v 1.11 2009/04/11 14:46:56 ohwada Exp $ *}>

<script type="text/javascript">
//<![CDATA[
function webphoto_timeline_zoom( link, op, unit )
{
	var date  = timeline_get_center_date();
	link.href = '<{$xoops_url}>/modules/<{$xoops_dirname}>/index.php?op=' + op + '&unit=' + unit + '&date=' + encodeURIComponent(date) ;
	return true;
}
//]]>
</script>

<a href="<{$xoops_url}>/modules/<{$xoops_dirname}>/index.php">
<{$xoops_modulename}></a>

<{* === title for normal === *}>
<{if $title_bread_crumb }>
  &gt;&gt; <{$title_bread_crumb}> ( <{$total_bread_crumb}> )
<{/if}>

<{* === catpath for category === *}>
<{if $show_catpath }>
  <{assign var="catpath_first" value=$catpath.first }>

  &gt;&gt; 

  <{if $cfg_use_pathinfo }>
    <a href="<{$xoops_url}>/modules/<{$xoops_dirname}>/index.php/category/<{$catpath_first.cat_id}>/">
  <{else}>
    <a href="<{$xoops_url}>/modules/<{$xoops_dirname}>/index.php?fct=category&amp;p=<{$catpath_first.cat_id}>">
  <{/if}>

  <img src="<{$xoops_url}>/modules/<{$xoops_dirname}>/images/icons/category.png" width="16" height="16" border="0" alt="<{$catpath_first.cat_title_s}>" />
  </a> 

  <{foreach item=catpath_list from=$catpath.list}>
    <{if $cfg_use_pathinfo }>
      <a href="<{$xoops_url}>/modules/<{$xoops_dirname}>/index.php/category/<{$catpath_list.cat_id}>/">
    <{else}>
      <a href="<{$xoops_url}>/modules/<{$xoops_dirname}>/index.php?fct=category&amp;p=<{$catpath_list.cat_id}>">
    <{/if}>
    <{$catpath_list.cat_title_s}>
    </a> : 
  <{/foreach}>
  
  ( <{$total_bread_crumb}> )
<{/if}>
<{* === catpath end === *}>

<br />

<{* === gmap js === *}>
<{if $show_gmap }>
  <{include file="db:`$mydirname`_inc_gmap_js.html" }>
  <{include file="db:`$mydirname`_inc_gmap_icons.html" }>
  <{include file="db:`$mydirname`_inc_gmap_makers.html" }>
<{/if}>
<{* === gmap js end === *}>

<{* === timeline js === *}>
<{if $show_timeline }>
  <{$timeline_js }>
<{/if}>
<{* === timeline js end === *}>

<{* === windows js === *}>
<{if $show_js_window }>
<script type="text/javascript">
//<![CDATA[
<{if $show_js_boxlist }>
  var webphoto_box_list = "<{$js_boxlist}>";
<{/if}>
<{if $show_js_load }>
  window.onload   = <{$js_load}>;
<{/if}>
<{if $show_js_unload }>
  window.onunload = <{$js_unload}>;
<{/if}>
//]]>
</script>
<{/if}>
<{* === windows js end === *}>

<div class="webphoto_page_title">
  <{$xoops_modulename}>
</div>

<{if $index_desc != ''}>
  <div class="webphoto_index_desc">
  <{$index_desc}>
  </div>
<{/if}>

<{* === menue === *}>
<{if $show_menu }>
  <{include file="db:`$mydirname`_inc_menu.html" }>
<{/if}>

<{* === search form === *}>
<{if $show_search }>
  <{include file="db:`$mydirname`_inc_search.html" }>
<{/if}>

<{* === tag cloud === *}>
<{if $show_tagcloud }>
  <div id="webphoto_box_tagcloud_b">
  <a href="javascript:webphoto_box_visible_flip('webphoto_box_tagcloud', 0)">
  <img src="<{$xoops_url}>/modules/<{$xoops_dirname}>/images/icons/box_minus.png" width="16" height="16" border="0" alt="minus" />
  <{$lang_tagcloud_off}></a> <br />
  <div class="webphoto_tagcloud" >
  <{foreach from=$tagcloud item=tagc }>
    <a href="<{$tagc.link}>" style="text-decoration:none;padding:2px;font-size:<{$tagc.size}>px;">
    <{$tagc.name|escape}></a>
  <{/foreach}>
  </div>
  </div>

  <div id="webphoto_box_tagcloud_a" style="display:none">
  <img src="<{$xoops_url}>/modules/<{$xoops_dirname}>/images/icons/box_plus.png" width="16" height="16" border="0" alt="minus" />
  <a href="javascript:webphoto_box_visible_flip('webphoto_box_tagcloud', 1)">
  <{$lang_tagcloud_on}></a>
  </div>
<{/if}>

<{* === cat list === *}>
<{if $show_catlist }>
  <div id="webphoto_box_catlist_b">
  <a href="javascript:webphoto_box_visible_flip('webphoto_box_catlist', 0)">
  <img src="<{$xoops_url}>/modules/<{$xoops_dirname}>/images/icons/box_minus.png" width="16" height="16" border="0" alt="minus" />
  <{$lang_catlist_off}></a> <br />
  <div class="webphoto_categories" >
  <{include file="db:`$mydirname`_inc_catlist.html"}>
  </div>
  </div>

  <div id="webphoto_box_catlist_a" style="display:none">
  <img src="<{$xoops_url}>/modules/<{$xoops_dirname}>/images/icons/box_plus.png" width="16" height="16" border="0" alt="minus" />
  <a href="javascript:webphoto_box_visible_flip('webphoto_box_catlist', 1)">
  <{$lang_catlist_on}></a>
  </div>
<{/if}>

<{* === timeline === *}>
<{if $show_timeline }>
  <div id="webphoto_box_timeline_b">
  <a href="javascript:webphoto_box_timeline_off()">
  <img src="<{$xoops_url}>/modules/<{$xoops_dirname}>/images/icons/box_minus.png" width="16" height="16" border="0" alt="minus" />
  <{$lang_timeline_off}></a> <br />

  <{if $show_timeline_large }>
    <div class="webphoto_timeline_navi">
    <{if $cfg_use_pathinfo }>
      <a href="<{$xoops_url}>/modules/<{$xoops_dirname}>/index.php/timeline/">
    <{else}>
      <a href="<{$xoops_url}>/modules/<{$xoops_dirname}>/index.php?op=timeline">
    <{/if}>
    <{$lang_timeline_large}></a> 
    </div>
  <{/if}>

  <{if $show_timeline_unit }>
    <div class="webphoto_timeline_navi">
    <a href="#" onClick="return webphoto_timeline_zoom( this,'<{$op}>','decade')">
    <{$lang_timeline_scale_decade}></a> |
    <a href="#" onClick="return webphoto_timeline_zoom( this,'<{$op}>','year')">
    <{$lang_timeline_scale_year}></a> |
    <a href="#" onClick="return webphoto_timeline_zoom( this,'<{$op}>','month')">
    <{$lang_timeline_scale_month}></a> |
    <a href="#" onClick="return webphoto_timeline_zoom( this,'<{$op}>','week')">
    <{$lang_timeline_scale_week}></a> 
    </div>
  <{/if}>

  <div id="<{$timeline_element}>" class="<{$timeline_class}>">Loading ...</div>

  <div class="webphoto_timeline_caution">
  <{$lang_timeline_caution_ie}>
  </div>

  </div>

  <div id="webphoto_box_timeline_a" style="display:none">
  <img src="<{$xoops_url}>/modules/<{$xoops_dirname}>/images/icons/box_plus.png" width="16" height="16" border="0" alt="minus" />
  <a href="javascript:webphoto_box_timeline_on()">
  <{$lang_timeline_on}></a> </a>
  </div>

  <br />
<{/if}>

<{* === gmap === *}>
<{if $show_gmap }>
  <div id="webphoto_box_gmap_b">
  <a href="javascript:webphoto_box_gmap_off()">
  <img src="<{$xoops_url}>/modules/<{$xoops_dirname}>/images/icons/box_minus.png" width="16" height="16" border="0" alt="minus" />
  <{$lang_gmap_off}></a> <br />
  <{$lang_gmap_desc}><br />

  <{if $show_map_large }>
    <div class="webphoto_gmap_navi">
    <{if $cfg_use_pathinfo }>
      <a href="<{$xoops_url}>/modules/<{$xoops_dirname}>/index.php/map/">
    <{else}>
      <a href="<{$xoops_url}>/modules/<{$xoops_dirname}>/index.php?op=map">
    <{/if}>
    <{$lang_map_large}></a> 
    </div>
  <{/if}>

  <div id="webphoto_gmap_map" class="<{$gmap_class}>">Loading ...</div>
  <div id="webphoto_gmap_not_compatible" class="webphoto_error"></div>
  </div>

  <div id="webphoto_box_gmap_a" style="display:none">
  <img src="<{$xoops_url}>/modules/<{$xoops_dirname}>/images/icons/box_plus.png" width="16" height="16" border="0" alt="minus" />
  <a href="javascript:webphoto_box_gmap_on()">
  <{$lang_gmap_on}></a> </a>
  </div>

  <br />
<{/if}>

<{* === catpath for category === *}>
<{if $show_catpath }>
  <{assign var="catpath_last" value=$catpath.last }>
  <div class="webphoto_catpath">

  <{if $cfg_use_pathinfo }>
    <a href="<{$xoops_url}>/modules/<{$xoops_dirname}>/index.php/category/<{$catpath_last.cat_id}>/">
  <{else}>
    <a href="<{$xoops_url}>/modules/<{$xoops_dirname}>/index.php?fct=category&amp;p=<{$catpath_last.cat_id}>">
  <{/if}>

  <{if $catpath_last.imgurl_s != ""}>
    <{if $catpath_last.cat_main_width && $catpath_last.cat_main_height }>
      <img src="<{$catpath_last.imgurl_s}>" width="<{$catpath_last.cat_main_width}>" height="<{$catpath_last.cat_main_height}>" border="0" alt="<{$catpath_last.cat_title_s}>" />
    <{else}>
      <img src="<{$catpath_last.imgurl_s}>" width="<{$cat_main_width}>" border="0" alt="<{$catpath_last.cat_title_s}>" />
    <{/if}>
  <{/if}>

  <img src="<{$xoops_url}>/modules/<{$xoops_dirname}>/images/icons/category.png" width="16" height="16" border="0" alt="<{$catpath_last.cat_title_s}>" />
  </a> 

  <{foreach item=catpath_list from=$catpath.list}>
    <{if $cfg_use_pathinfo }>
      <a href="<{$xoops_url}>/modules/<{$xoops_dirname}>/index.php/category/<{$catpath_list.cat_id}>/">
    <{else}>
      <a href="<{$xoops_url}>/modules/<{$xoops_dirname}>/index.php?fct=category&amp;p=<{$catpath_list.cat_id}>">
    <{/if}>

    <span class="webphoto_catpath_title"><{$catpath_list.cat_title_s}></span>
    </a> : 
  <{/foreach}>  

  Total <{$photo_total}> (<{$photo_sum}>)
  </div>
<{/if}>
<{* === catpath end === *}>

<{* === title for normal === *}>
<{if $sub_title_s != '' }>
  <div class="webphoto_sub_title_total">
  <span class="webphoto_sub_title"><{$sub_title_s}></span>
  Total <{$photo_total}>
  </div>
<{/if}>
<{* === title end === *}>

<{if $cat_desc_disp != '' }>
  <div class="webphoto_cat_desc"><{$cat_desc_disp}></div>
<{/if}>

<{if $sub_desc_s != '' }>
  <div class="webphoto_sub_desc"><{$sub_desc_s}></div>
<{/if}>

<{* === search === *}>
<{if $show_search }>
  <div class="webphoto_page_subtitle"><{$search_lang_searchresults}></div>

  <{$search_lang_keywords}>
  <{foreach item=keyword from=$search_keywords}>
    <span class="webphoto_sr_keyword"><{$keyword}></span> 
  <{/foreach}>
  <br />

  <{if $search_show_candidate }>
    <br />
    <{$lang_sr_candicate}>:<br />
    <{foreach item=candidate from=$search_candidates}>
      <span class="webphoto_sr_keyword"><{$candidate.keyword}></span> 
      (<{$candidate.lang}>) 
    <{/foreach}>
    <br />
  <{/if}>

  <{if $search_show_ignore }>
    <br />
    <{$search_lang_keyignore}><br />
    <{foreach item=ignore from=$search_ignores}>
    <span class="webphoto_sr_keyword"><{$ignore}></span> 
    <{/foreach}>
    <br />
  <{/if}>
  <br />
<{/if}>

<{if $show_search_lang_keytooshort }>
  <div class="webphoto_error"><{$search_lang_keytooshort}></div>
<{/if}>

<{if $show_nomatch }>
  <div class="webphoto_error"><{$lang_nomatch_photo}></div>
<{/if}>

<{if $random_more_url_s != '' }>
  <div class="webphoto_sub_desc">
  <a href="<{$xoops_url}>/modules/<{$xoops_dirname}>/<{$random_more_url_s}>">
  <{$lang_random_more}></a>
  </div>
<{/if}>

<{if $show_photo }>
  <ul>
  <li><{$lang_usage_photo}></li>
  <li><{$lang_usage_title}></li>
  </ul><br />
<{/if}>

<{if $show_photo }>
  <div class="webphoto_photo_type">
   | 
  <a href="javascript:webphoto_box_visible_flip('webphoto_box_photo', 0)">
  <{$lang_viewtype_list}></a> | 
  <a href="javascript:webphoto_box_visible_flip('webphoto_box_photo', 1)">
  <{$lang_viewtype_table}></a> |
  </div>
<{/if}>

<{* === photo header === *}>
<{if $show_sort || $show_navi }>
  <div class="webphoto_index_photo_header">
<{/if}>

<{if $show_sort }>
  <div align="center">
  <{$lang_sort_sortby}> &nbsp; 

  <{$lang_sort_title}> (
  <a href="<{$xoops_url}>/modules/<{$xoops_dirname}>/index.php<{$param_sort}>sort=titlea">
  <img src="<{$xoops_url}>/modules/<{$xoops_dirname}>/images/icons/up.png" border="0" align="middle" alt="up" /></a>
  <a href="<{$xoops_url}>/modules/<{$xoops_dirname}>/index.php<{$param_sort}>sort=titled">
  <img src="<{$xoops_url}>/modules/<{$xoops_dirname}>/images/icons/down.png" border="0" align="middle" alt="down" />
  </a> ) &nbsp; 

  <{$lang_sort_date}> (
  <a href="<{$xoops_url}>/modules/<{$xoops_dirname}>/index.php<{$param_sort}>sort=datea">
  <img src="<{$xoops_url}>/modules/<{$xoops_dirname}>/images/icons/up.png" border="0" align="middle" alt="up" />
  </a>
  <a href="<{$xoops_url}>/modules/<{$xoops_dirname}>/index.php<{$param_sort}>sort=dated">
  <img src="<{$xoops_url}>/modules/<{$xoops_dirname}>/images/icons/down.png" border="0" align="middle" alt="down" />
  </a> ) &nbsp; 

  <{$lang_sort_hits}> (
  <a href="<{$xoops_url}>/modules/<{$xoops_dirname}>/index.php<{$param_sort}>sort=hitsa">
  <img src="<{$xoops_url}>/modules/<{$xoops_dirname}>/images/icons/up.png" border="0" align="middle" alt="up" />
  </a>
  <a href="<{$xoops_url}>/modules/<{$xoops_dirname}>/index.php<{$param_sort}>sort=hitsd">
  <img src="<{$xoops_url}>/modules/<{$xoops_dirname}>/images/icons/down.png" border="0" align="middle" alt="down" />
  </a> ) &nbsp; 

  <{if $has_rateview }>
    <{$lang_sort_rating}> (
    <a href="<{$xoops_url}>/modules/<{$xoops_dirname}>/index.php<{$param_sort}>sort=ratinga">
    <img src="<{$xoops_url}>/modules/<{$xoops_dirname}>/images/icons/up.png" border="0" align="middle" alt="up" />
    </a>
    <a href="<{$xoops_url}>/modules/<{$xoops_dirname}>/index.php<{$param_sort}>sort=ratingd">
    <img src="<{$xoops_url}>/modules/<{$xoops_dirname}>/images/icons/down.png" border="0" align="middle" alt="down" />
    </a> ) 
  <{/if}>

  <{if $show_sort_random }>
    <{$lang_sort_random}> (
    <a href="<{$xoops_url}>/modules/<{$xoops_dirname}>/index.php<{$param_sort}>sort=random">
    <img src="<{$xoops_url}>/modules/<{$xoops_dirname}>/images/icons/up.png" border="0" align="middle" alt="up" />
    <img src="<{$xoops_url}>/modules/<{$xoops_dirname}>/images/icons/down.png" border="0" align="middle" alt="down" />
    </a> ) 
  <{/if}>

  <br />
  <b><{$lang_cursortedby}></b>
  </div>
  <br />
<{/if}>

<{if $show_navi }>
  <div align="left">
    <{$navi_info}>
  </div>
  <div align="right">
    <{$navi_page}>
  </div>
<{/if}>

<{if $show_sort || $show_navi }>
  </div>
<{/if}>
<{* === photo header end === *}>

<{* === photo body === *}>
<{if $show_photo }>
  <div class="webphoto_index_photo_body">

<{* -- list type -- *}>
  <{if $cfg_viewtype == 'list'}>
    <div id="webphoto_box_photo_a">
  <{else}>
    <div id="webphoto_box_photo_a" style="display:none">
  <{/if}>

    <{foreach name=webphoto_list item=photo from=$photos}>
      <{include file="db:`$mydirname`_inc_photo_in_list.html"}>
    <{/foreach}>
  </div>

  <br />
  </div>

<{* -- table type -- *}>
  <{if $cfg_viewtype == 'table'}>
    <div id="webphoto_box_photo_b">
  <{else}>
    <div id="webphoto_box_photo_b" style="display:none">
  <{/if}>

    <table border="0">
    <{foreach name=webphoto_list item=photo from=$photos}>
<{* -- open table photo -- *}>
    <{if $smarty.foreach.webphoto_list.iteration mod $cfg_colsoftableview == 1}>
      <tr>
    <{/if}>
<{* -- open table column -- *}>
    <td width="<{$width_of_tableview}>%">
      <{include file="db:`$mydirname`_inc_photo_in_table.html"}>
    </td>
<{* -- close table column -- *}>
    <{if ($smarty.foreach.webphoto_list.iteration is div by $cfg_colsoftableview) || $smarty.foreach.webphoto_list.last}>
      </tr>
    <{/if}>
<{* -- close table photo -- *}>
    <{/foreach}>
    </table>
  </div>

<{/if}>
<{* === photo body end === *}> 

<{* === photo footer end === *}>
<{if $show_navi }>
  <div class="webphoto_index_photo_footer">
  <div align="left">
    <{$navi_info}>
  </div>
  <div align="right">
    <{$navi_page}>
  </div>
  </div>
<{/if}>
<{* === photo footer end === *}>

<{* === QR === *}>
<{if $show_qr }>
  <div align="center">
  <img src="<{$qrs_url}>/qr_index.png" border="0" alt="qr_index" /><br />
  <a href="mailto:<{$mobile_email}>?subject=webphoto_url&amp;body=<{$mobile_url}>"><{$lang_mobile_mailto}></a><br />
  </div>
<{/if}>

<{* === notification === *}>
<{if $show_notification_select }>
  <div align="center">
    <{include file="db:`$mydirname`_inc_notification_select.html"}>
  </div>
  <br />
<{/if}>

<hr />
<noscript>
  <div class="webphoto_error"><{$lang_js_invalid}></div>
</noscript>

<div class="webphoto_execution_time">execution time : <{$execution_time}> sec </div>
<{if $is_module_admin && ($memory_usage > 0)}>
	<div class="webphoto_memory_usage">memory usage : <{$memory_usage}> MB </div>
<{/if}>

<{* this is NOT copyright. you can remove this. *}>
<div class="webphoto_footer">
  <a href="<{$happy_linux_url}>" target="_blank">Powered by Happy Linux</a> | 
  <a href="http://www.peak.ne.jp/xoops/" target="_blank">myAlbum-P</a> | 
  <a href="http://bluetopia.homeip.net/" target="_blank">original</a>
</div>

<{if $is_module_admin }>
  <br />
  <a href="<{$xoops_url}>/modules/<{$xoops_dirname}>/admin/index.php"><{$lang_goto_admin}></a>
<{/if}>
